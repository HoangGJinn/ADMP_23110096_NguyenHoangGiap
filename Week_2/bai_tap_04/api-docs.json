{"openapi":"3.1.0","info":{"title":"Discord Clone API Specification","description":"Tài liệu API cho dự án Discord Clone Backend","termsOfService":"Terms of service","contact":{"name":"Hoàng Giáp","url":"https://github.com/HoangGJinn","email":"contact@hoanggiap.com"},"license":{"name":"MIT License","url":"https://opensource.org/licenses/mit"},"version":"1.0"},"servers":[{"url":"http://localhost:8080","description":"Local Environment"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"Search","description":"APIs tìm kiếm gần đúng (fuzzy search)"}],"paths":{"/api/users/profile":{"put":{"tags":["user-controller"],"operationId":"updateProfile","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProfileRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}}},"/api/servers/{serverId}":{"get":{"tags":["server-controller"],"operationId":"getServerById","parameters":[{"name":"serverId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ServerResponse"}}}}}},"put":{"tags":["server-controller"],"operationId":"updateServer","parameters":[{"name":"serverId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateServerRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ServerResponse"}}}}}},"delete":{"tags":["server-controller"],"operationId":"deleteServer","parameters":[{"name":"serverId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}},"/api/channels/{channelId}":{"get":{"tags":["channel-controller"],"operationId":"getChannelById","parameters":[{"name":"channelId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ChannelResponse"}}}}}},"put":{"tags":["channel-controller"],"operationId":"updateChannel","parameters":[{"name":"channelId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateChannelRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ChannelResponse"}}}}}},"delete":{"tags":["channel-controller"],"operationId":"deleteChannel","parameters":[{"name":"channelId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}},"/api/categories/{categoryId}":{"get":{"tags":["category-controller"],"operationId":"getCategoryById","parameters":[{"name":"categoryId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CategoryResponse"}}}}}},"put":{"tags":["category-controller"],"operationId":"updateCategory","parameters":[{"name":"categoryId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCategoryRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CategoryResponse"}}}}}},"delete":{"tags":["category-controller"],"operationId":"deleteCategory","parameters":[{"name":"categoryId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}},"/api/servers":{"post":{"tags":["server-controller"],"operationId":"createServer","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateServerRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ServerResponse"}}}}}}},"/api/servers/{serverId}/leave":{"post":{"tags":["server-controller"],"operationId":"leaveServer","parameters":[{"name":"serverId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}},"/api/servers/{serverId}/invite-code":{"post":{"tags":["server-controller"],"operationId":"regenerateInviteCode","parameters":[{"name":"serverId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}},"/api/servers/{serverId}/channels":{"get":{"tags":["channel-controller"],"operationId":"getChannelsByServer","parameters":[{"name":"serverId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChannelResponse"}}}}}}},"post":{"tags":["channel-controller"],"operationId":"createChannel","parameters":[{"name":"serverId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateChannelRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ChannelResponse"}}}}}}},"/api/servers/{serverId}/categories":{"get":{"tags":["category-controller"],"operationId":"getCategoriesByServer","parameters":[{"name":"serverId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CategoryResponse"}}}}}}},"post":{"tags":["category-controller"],"operationId":"createCategory","parameters":[{"name":"serverId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCategoryRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CategoryResponse"}}}}}}},"/api/servers/join":{"post":{"tags":["server-controller"],"operationId":"joinServer","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JoinServerRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ServerResponse"}}}}}}},"/api/auth/verify-account":{"post":{"tags":["auth-controller"],"operationId":"verifyAccount","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyAccountRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/auth/reset-password":{"post":{"tags":["auth-controller"],"operationId":"resetPassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/auth/resend-otp":{"post":{"tags":["auth-controller"],"operationId":"resendOtp","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResendOtpRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/auth/register":{"post":{"tags":["auth-controller"],"operationId":"registerUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/auth/login":{"post":{"tags":["auth-controller"],"operationId":"authenticateUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/auth/forget-password":{"post":{"tags":["auth-controller"],"operationId":"forgotPassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForgotPasswordRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/users/me":{"get":{"tags":["user-controller"],"operationId":"getUser","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}}},"/api/servers/{serverId}/members":{"get":{"tags":["server-controller"],"operationId":"getServerMembers","parameters":[{"name":"serverId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ServerMemberResponse"}}}}}}}},"/api/servers/{serverId}/details":{"get":{"tags":["server-controller"],"operationId":"getServerDetails","parameters":[{"name":"serverId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ServerResponse"}}}}}}},"/api/servers/my-servers":{"get":{"tags":["server-controller"],"operationId":"getMyServers","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ServerResponse"}}}}}}}},"/api/search":{"get":{"tags":["Search"],"summary":"Tìm kiếm tổng hợp","description":"Tìm kiếm gần đúng trong servers, channels, categories. Sử dụng LIKE %keyword%","operationId":"searchAll","parameters":[{"name":"keyword","in":"query","description":"Từ khóa tìm kiếm","required":true,"schema":{"type":"string"}},{"name":"serverId","in":"query","description":"ID server (optional - để lọc channels, categories)","required":false,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SearchResponse"}}}}}}},"/api/search/servers":{"get":{"tags":["Search"],"summary":"Tìm kiếm servers","description":"Tìm kiếm gần đúng theo tên hoặc mô tả server","operationId":"searchServers","parameters":[{"name":"keyword","in":"query","description":"Từ khóa tìm kiếm","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ServerSearchResult"}}}}}}}},"/api/search/members":{"get":{"tags":["Search"],"summary":"Tìm kiếm members","description":"Tìm kiếm gần đúng theo displayName, userName hoặc nickname của member trong server","operationId":"searchMembers","parameters":[{"name":"keyword","in":"query","description":"Từ khóa tìm kiếm","required":true,"schema":{"type":"string"}},{"name":"serverId","in":"query","description":"ID server (bắt buộc)","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MemberSearchResult"}}}}}}}},"/api/search/channels":{"get":{"tags":["Search"],"summary":"Tìm kiếm channels","description":"Tìm kiếm gần đúng theo tên channel","operationId":"searchChannels","parameters":[{"name":"keyword","in":"query","description":"Từ khóa tìm kiếm","required":true,"schema":{"type":"string"}},{"name":"serverId","in":"query","description":"ID server (optional)","required":false,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChannelSearchResult"}}}}}}}},"/api/search/categories":{"get":{"tags":["Search"],"summary":"Tìm kiếm categories","description":"Tìm kiếm gần đúng theo tên category","operationId":"searchCategories","parameters":[{"name":"keyword","in":"query","description":"Từ khóa tìm kiếm","required":true,"schema":{"type":"string"}},{"name":"serverId","in":"query","description":"ID server (optional)","required":false,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CategorySearchResult"}}}}}}}},"/api/categories/{categoryId}/channels":{"get":{"tags":["channel-controller"],"operationId":"getChannelsByCategory","parameters":[{"name":"categoryId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChannelResponse"}}}}}}}}},"components":{"schemas":{"UpdateProfileRequest":{"type":"object","properties":{"displayName":{"type":"string"},"bio":{"type":"string"},"avatarUrl":{"type":"string"},"pronouns":{"type":"string"},"country":{"type":"string"},"birthDate":{"type":"string","format":"date"}}},"UserResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"username":{"type":"string"},"email":{"type":"string"},"displayName":{"type":"string"},"avatarUrl":{"type":"string"},"bio":{"type":"string"},"birthDate":{"type":"string","format":"date"},"country":{"type":"string"},"pronouns":{"type":"string"},"isActive":{"type":"boolean"},"isEmailVerified":{"type":"boolean"},"createdAt":{"type":"string","format":"date-time"},"lastActive":{"type":"string","format":"date-time"},"roles":{"type":"array","items":{"type":"string"},"uniqueItems":true}}},"UpdateServerRequest":{"type":"object","properties":{"name":{"type":"string","maxLength":100,"minLength":2},"description":{"type":"string","maxLength":500,"minLength":0},"iconUrl":{"type":"string"}}},"CategoryResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"position":{"type":"integer","format":"int32"},"serverId":{"type":"integer","format":"int64"},"channels":{"type":"array","items":{"$ref":"#/components/schemas/ChannelResponse"}},"createdAt":{"type":"string","format":"date-time"}}},"ChannelResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"type":{"type":"string","enum":["TEXT","VOICE"]},"topic":{"type":"string"},"position":{"type":"integer","format":"int32"},"serverId":{"type":"integer","format":"int64"},"categoryId":{"type":"integer","format":"int64"},"createdAt":{"type":"string","format":"date-time"}}},"ServerMemberResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"userId":{"type":"integer","format":"int64"},"userName":{"type":"string"},"displayName":{"type":"string"},"nickname":{"type":"string"},"role":{"type":"string","enum":["OWNER","ADMIN","MEMBER"]},"joinedAt":{"type":"string","format":"date-time"}}},"ServerResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"description":{"type":"string"},"iconUrl":{"type":"string"},"inviteCode":{"type":"string"},"ownerId":{"type":"integer","format":"int64"},"ownerName":{"type":"string"},"memberCount":{"type":"integer","format":"int32"},"channelCount":{"type":"integer","format":"int32"},"categories":{"type":"array","items":{"$ref":"#/components/schemas/CategoryResponse"}},"channels":{"type":"array","items":{"$ref":"#/components/schemas/ChannelResponse"}},"members":{"type":"array","items":{"$ref":"#/components/schemas/ServerMemberResponse"}},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"UpdateChannelRequest":{"type":"object","properties":{"name":{"type":"string","maxLength":100,"minLength":1},"topic":{"type":"string","maxLength":500,"minLength":0},"position":{"type":"integer","format":"int32"},"categoryId":{"type":"integer","format":"int64"}}},"UpdateCategoryRequest":{"type":"object","properties":{"name":{"type":"string","maxLength":100,"minLength":1},"position":{"type":"integer","format":"int32"}}},"CreateServerRequest":{"type":"object","properties":{"name":{"type":"string","maxLength":100,"minLength":2},"description":{"type":"string","maxLength":500,"minLength":0},"iconUrl":{"type":"string"}},"required":["name"]},"CreateChannelRequest":{"type":"object","properties":{"name":{"type":"string","maxLength":100,"minLength":1},"serverId":{"type":"integer","format":"int64"},"categoryId":{"type":"integer","format":"int64"},"type":{"type":"string","enum":["TEXT","VOICE"]},"topic":{"type":"string","maxLength":500,"minLength":0}},"required":["name","serverId"]},"CreateCategoryRequest":{"type":"object","properties":{"name":{"type":"string","maxLength":100,"minLength":1},"serverId":{"type":"integer","format":"int64"}},"required":["name","serverId"]},"JoinServerRequest":{"type":"object","properties":{"inviteCode":{"type":"string"}},"required":["inviteCode"]},"VerifyAccountRequest":{"type":"object","properties":{"email":{"type":"string"},"otp":{"type":"string","maxLength":6,"minLength":6}},"required":["email","otp"]},"ResetPasswordRequest":{"type":"object","properties":{"email":{"type":"string"},"otp":{"type":"string","maxLength":6,"minLength":6},"newPassword":{"type":"string","maxLength":2147483647,"minLength":6}},"required":["email","newPassword","otp"]},"ResendOtpRequest":{"type":"object","properties":{"email":{"type":"string"},"type":{"type":"string"}},"required":["email","type"]},"RegisterRequest":{"type":"object","properties":{"username":{"type":"string","maxLength":30,"minLength":3},"email":{"type":"string"},"password":{"type":"string","maxLength":2147483647,"minLength":6},"displayName":{"type":"string"}},"required":["email","password","username"]},"LoginRequest":{"type":"object","properties":{"userName":{"type":"string"},"password":{"type":"string"}},"required":["password","userName"]},"ForgotPasswordRequest":{"type":"object","properties":{"email":{"type":"string"}},"required":["email"]},"CategorySearchResult":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"serverId":{"type":"integer","format":"int64"},"serverName":{"type":"string"},"channelCount":{"type":"integer","format":"int32"}}},"ChannelSearchResult":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"type":{"type":"string"},"serverId":{"type":"integer","format":"int64"},"serverName":{"type":"string"},"categoryId":{"type":"integer","format":"int64"},"categoryName":{"type":"string"}}},"MemberSearchResult":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"userId":{"type":"integer","format":"int64"},"userName":{"type":"string"},"displayName":{"type":"string"},"nickname":{"type":"string"},"role":{"type":"string"},"serverId":{"type":"integer","format":"int64"},"serverName":{"type":"string"}}},"SearchResponse":{"type":"object","properties":{"keyword":{"type":"string"},"servers":{"type":"array","items":{"$ref":"#/components/schemas/ServerSearchResult"}},"channels":{"type":"array","items":{"$ref":"#/components/schemas/ChannelSearchResult"}},"categories":{"type":"array","items":{"$ref":"#/components/schemas/CategorySearchResult"}},"members":{"type":"array","items":{"$ref":"#/components/schemas/MemberSearchResult"}}}},"ServerSearchResult":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"description":{"type":"string"},"iconUrl":{"type":"string"},"memberCount":{"type":"integer","format":"int32"}}}},"securitySchemes":{"bearerAuth":{"type":"http","description":"JWT auth description","in":"header","scheme":"bearer","bearerFormat":"JWT"}}}}